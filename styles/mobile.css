/* ===== Mobile layout: map full, controls sticky, text below ===== */
@media (max-width: 980px) {
  /* kontener całego widoku timeline */
  .timeline-mobile {
    display: grid;
    grid-template-rows: auto auto 1fr;
    min-height: 100dvh;
    background: #000;
  }

  /* MAPA – pełna szerokość, wysoka na ~68vh, bez paneli na boki */
  .map-root {
    position: relative !important;
    inset: auto !important;
    width: 100%;
    height: 68dvh;
    z-index: 1;
    border-bottom: 1px solid #161616;
  }

  /* Header (strzałka + logo) nad mapą */
  .app-header {
    position: absolute;
    left: 12px; top: 10px;
    z-index: 5;
    background: transparent;
  }

  /* Transport – pod mapą, sticky, ze wsparciem notch (safe area) */
  .transport {
    position: sticky;
    top: 0; /* nieistotne, bo poniżej mapy, ale trzyma się miejsca */
    bottom: auto;
    z-index: 4;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    padding: 10px max(10px, env(safe-area-inset-left)) 10px max(10px, env(safe-area-inset-right));
    background: linear-gradient(180deg, rgba(0,0,0,.85), rgba(0,0,0,.85));
    border-bottom: 1px solid #161616;
  }
  .transport .btn { 
    border-radius: 12px; 
    height: 44px;
    min-width: 80px;
    padding: 0 16px;
    font-weight: 700;
  }

  /* Panel tekstu – pod transportem; karty responsywne */
  .side-panel {
    position: relative !important;
    right: auto; top: auto; bottom: auto;
    width: 100%;
    height: auto;
    padding: 14px 14px calc(14px + env(safe-area-inset-bottom));
    background: #000;
    border-left: none;
    border-top: 1px solid #161616;
    overflow-y: auto;
  }

  .side-panel h2 { margin: 4px 0 8px; }
  .side-panel .intro { margin: 8px 0 12px; }

  .side-panel ol { 
    display: flex;
    flex-direction: column;
    gap: 10px; 
    list-style: none;
    padding: 0;
    margin: 0;
  }
  .side-panel li {
    background: #0c0c0c;
    border: 1px solid #1f1f1f;
    border-radius: 12px;
    padding: 12px;
    color: #cfcfcf;
    transition: all 0.3s ease;
  }
  .side-panel li.is-speaking {
    border-color: #d4aa27;
    background: rgba(212,170,39,.08);
    color: #fff;
    box-shadow: 0 0 0 1px rgba(212,170,39,.35), 0 8px 28px rgba(212,170,39,.05);
  }

  /* Przycisk Home + logo (mobile) */
  .app-header .back { 
    width: 40px; 
    height: 40px; 
    font-size: 18px; 
    border-radius: 10px;
    background: rgba(0,0,0,.7);
    border: 1px solid rgba(255,255,255,.15);
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .app-header .logo { 
    height: 20px; 
    margin-left: 8px;
  }

  /* Override desktop styles */
  .timeline-header {
    position: relative !important;
    left: auto !important;
    top: auto !important;
  }
  
  .timeline-panel {
    position: relative !important;
    right: auto !important;
    top: auto !important;
    bottom: auto !important;
  }

  .player-ctrl {
    position: relative !important;
    left: auto !important;
    bottom: auto !important;
    transform: none !important;
  }
}